<html><head><base href="https://websim.ai/"><title>Windows XP Simulator</title><style>body{margin:0;padding:0;font-family:'Tahoma',sans-serif;overflow:hidden;user-select:none;}.desktop{width:100vw;height:100vh;position:relative;background-image:url('https://d7hftxdivxxvm.cloudfront.net/?quality=80&resize_to=width&src=https%3A%2F%2Fartsy-media-uploads.s3.amazonaws.com%2F2RNK1P0BYVrSCZEy_Sd1Ew%252F3417757448_4a6bdf36ce_o.jpg&width=910');background-size:cover;background-position:center;}.taskbar{position:absolute;bottom:0;left:0;right:0;height:30px;background:linear-gradient(to bottom,#2584ff 0%,#0254cc 100%);display:flex;align-items:center;padding:0 2px;z-index:1000;}.start-button{background:linear-gradient(to bottom,#6cd82e 0%,#4ca916 100%);color:white;font-weight:bold;padding:2px 10px;border-radius:3px;margin-right:10px;cursor:pointer;}.clock{margin-left:auto;color:white;font-size:11px;padding-right:10px;}.icon{position:absolute;display:flex;flex-direction:column;align-items:center;cursor:move;color:white;text-shadow:1px 1px 2px black;}.icon img{width:32px;height:32px;margin-bottom:5px;}.icon-label{font-size:12px;text-align:center;}.window{position:absolute;background:#ECE9D8;border:1px solid #0054E3;box-shadow:2px 2px 5px rgba(0,0,0,0.2);resize:both;overflow:auto;min-width:200px;min-height:150px;}.window-header{background:linear-gradient(to right,#0058E6,#3986FF);color:white;padding:5px;font-weight:bold;display:flex;justify-content:space-between;align-items:center;cursor:move;}.window-content{padding:10px;height:calc(100% - 40px);overflow:auto;}.close-btn,.minimize-btn,.maximize-btn{cursor:pointer;margin-left:5px;}.folder-view{display:flex;flex-wrap:wrap;gap:30px;padding:15px;}.folder-icon{display:flex;flex-direction:column;align-items:center;width:80px;cursor:pointer;}.folder-icon img{width:48px;height:48px;margin-bottom:5px;}.folder-label{font-size:11px;text-align:center;color:black;} .folder-window{display:flex;height:100%;background:#fff;} .folder-sidebar{width:150px;background:linear-gradient(to bottom,#dbe9f9,#c2d8f0);padding:10px;font-size:12px;color:#000;} .folder-content{flex:1;overflow:auto;}.my-computer-content{display:flex;flex-wrap:wrap;gap:20px;padding:10px;}.drive-icon{display:flex;flex-direction:column;align-items:center;width:80px;cursor:pointer;}.drive-icon img{width:32px;height:32px;margin-bottom:5px;}.drive-label{font-size:11px;text-align:center;color:black;}.document-content{padding:10px;font-size:12px;}.psp-emu-window{width:100%;height:100%;border:none;}.maximized{position:fixed !important;top:0 !important;left:0 !important;width:100vw !important;height:calc(100vh - 30px) !important;z-index:999;}.psp-emu-container{position:relative;width:100%;height:100%;}.psp-emu-overlay{position:absolute;top:0;left:0;right:0;height:38px;background:#ECE9D8;z-index:1;}.start-menu{position:absolute;bottom:30px;left:0;width:380px;background:#D5E3FC;border:1px solid #0054E3;box-shadow:2px 2px 5px rgba(0,0,0,0.2);display:none;z-index:1001;}.start-menu-header{background:linear-gradient(to right,#1758CA,#7DA3E8);color:white;padding:5px;font-weight:bold;font-size:14px;display:flex;align-items:center;}.start-menu-header img{width:24px;height:24px;margin-right:5px;}.start-menu-left{width:200px;background:#D5E3FC;padding:5px;}.start-menu-right{width:180px;background:#7DA3E8;padding:5px;}.start-menu-item{padding:5px;cursor:pointer;display:flex;align-items:center;}.start-menu-item:hover{background:#316AC5;color:white;}.start-menu-item img{width:24px;height:24px;margin-right:5px;}.start-menu-separator{height:1px;background:#7DA3E8;margin:5px 0;}.minimized{display:none;}.taskbar-item{background:linear-gradient(to bottom,#f0f0f0,#e0e0e0);border:1px solid #999;padding:2px 5px;margin-right:2px;cursor:pointer;max-width:150px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-size:11px;height:22px;line-height:22px;}.chrome-window{width:100%;height:calc(100% - 10px);border:none;}#taskbar-items{display:flex;flex-grow:1;overflow-x:hidden;}</style><style>.add-app-button{background:linear-gradient(to bottom,#ffa64d 0%,#d97a00 100%);color:white;font-weight:bold;padding:2px 10px;border-radius:3px;margin-right:10px;cursor:pointer;}</style><style>.context-menu{position:fixed;display:none;background:#f0f0f0;border:1px solid #666;z-index:1000;} .context-menu ul{list-style:none;margin:0;padding:5px 0;} .context-menu li{padding:4px 20px;white-space:nowrap;cursor:pointer;} .context-menu li:hover{background:#0a246a;color:#fff;} .context-menu.top{z-index:20000;} .open-menu-button{position:fixed;top:80px;right:20px;z-index:10001;cursor:move;}</style><link rel='stylesheet' href='about-modal.css'></head><body><div id="desktop" class="desktop"><div class="icon" style="top:20px;left:20px;" data-app="my-computer"><img src="https://i.imgur.com/Rc7JRUI.png" alt="My Computer"><div class="icon-label">My Computer</div></div><div class="icon" style="top:100px;left:20px;" data-app="recycle-bin"><img src="https://i.imgur.com/AVKS9Rm.png" alt="Recycle Bin"><div class="icon-label">Recycle Bin</div></div><div class="icon" style="top:180px;left:20px;" data-app="my-documents"><img src="https://cdn-icons-png.flaticon.com/512/3330/3330314.png" alt="My Documents"><div class="icon-label">My Documents</div></div><div class="icon" style="top:260px;left:20px;" data-app="psp-emu"><img src="https://cdn-icons-png.flaticon.com/512/2949/2949874.png" alt="PSP EMU"><div class="icon-label">PSP EMU</div></div><div class="icon" style="top:340px;left:20px;" data-app="google-chrome"><img src="https://upload.wikimedia.org/wikipedia/commons/e/e1/Google_Chrome_icon_%28February_2022%29.svg" alt="Google Chrome"><div class="icon-label">Google Chrome</div></div><div class="taskbar"><div class="start-button">Start</div><div class="add-app-button">Add App</div><div id="taskbar-items"></div><div class="clock">12:00</div></div><div class="start-menu"><div class="start-menu-header"><img src="https://i.imgur.com/Rc7JRUI.png" alt="User Icon">User</div><div style="display:flex;"><div class="start-menu-left"><div class="start-menu-item" data-app="internet-explorer"><img src="https://i.imgur.com/s9HhTqB.png" alt="Internet Explorer">Internet Explorer</div><div class="start-menu-item" data-app="outlook-express"><img src="https://i.imgur.com/iJrBwfj.png" alt="Outlook Express">Outlook Express</div><div class="start-menu-separator"></div><div class="start-menu-item" data-app="my-computer"><img src="https://i.imgur.com/Rc7JRUI.png" alt="My Computer">My Computer</div><div class="start-menu-item" data-app="my-documents"><img src="https://cdn-icons-png.flaticon.com/512/3330/3330314.png" alt="My Documents">My Documents</div><div class="start-menu-item" data-app="control-panel"><img src="https://i.imgur.com/Mrqm7i6.png" alt="Control Panel">Control Panel</div><div class="start-menu-separator"></div><div class="start-menu-item" data-app="help"><img src="https://i.imgur.com/OQw2CwX.png" alt="Help and Support">Help and Support</div><div class="start-menu-item" data-app="search"><img src="https://i.imgur.com/0X6zIZd.png" alt="Search">Search</div><div class="start-menu-item" data-app="run"><img src="https://i.imgur.com/qgxGYQM.png" alt="Run">Run...</div></div><div class="start-menu-right"><div class="start-menu-item" data-app="internet-explorer"><img src="https://i.imgur.com/s9HhTqB.png" alt="Internet">Internet</div><div class="start-menu-item" data-app="email"><img src="https://i.imgur.com/iJrBwfj.png" alt="E-mail">E-mail</div><div class="start-menu-separator"></div><div class="start-menu-item" data-app="psp-emu"><img src="https://cdn-icons-png.flaticon.com/512/2949/2949874.png" alt="PSP EMU">PSP EMU</div><div class="start-menu-item" data-app="google-chrome"><img src="https://upload.wikimedia.org/wikipedia/commons/e/e1/Google_Chrome_icon_%28February_2022%29.svg" alt="Google Chrome">Google Chrome</div><div class="start-menu-separator"></div><div class="start-menu-item" data-app="log-off"><img src="https://i.imgur.com/BpMCFCX.png" alt="Log Off">Log Off</div><div class="start-menu-item" data-app="turn-off"><img src="https://i.imgur.com/TftAWxI.png" alt="Turn Off Computer">Turn Off Computer</div></div></div></div></div><script>const apps={
  'my-computer': {
    title: 'My Computer',
    content: `
      <div class="folder-window">
  <div class="folder-sidebar">System Tasks</div>
  <div class="folder-content">
    <div class="my-computer-content">
        <div class="drive-icon">
          <img src="https://i.imgur.com/Q3SMT9S.png" alt="Local Disk (C:)">
          <div class="drive-label">Local Disk (C:)</div>
        </div>
        <div class="drive-icon">
          <img src="https://i.imgur.com/Q3SMT9S.png" alt="Local Disk (D:)">
          <div class="drive-label">Local Disk (D:)</div>
        </div>
        <div class="drive-icon">
          <img src="https://i.imgur.com/vGZOKOW.png" alt="CD Drive (E:)">
          <div class="drive-label">CD Drive (E:)</div>
        </div>
      </div>
    </div>
  </div>
</div>
    `
  },
  'recycle-bin': {
    title: 'Recycle Bin',
    content: `
      <div class="folder-window">
  <div class="folder-sidebar">Recycle Bin Tasks</div>
  <div class="folder-content">
    <div class="folder-view">
        <div class="folder-icon">
          <img src="https://i.imgur.com/AVKS9Rm.png" alt="Empty Recycle Bin">
          <div class="folder-label">Empty Recycle Bin</div>
        </div>
      </div>
    </div>
  </div>
</div>
    `
  },
  'my-documents': {
    title: 'My Documents',
    content: `
      <div class="folder-window">
  <div class="folder-sidebar">My Documents Tasks</div>
  <div class="folder-content">
    <div class="folder-view">
        <div class="folder-icon">
          <img src="https://cdn-icons-png.flaticon.com/512/3330/3330314.png" alt="New Text Document">
          <div class="folder-label">New Text Document</div>
        </div>
        <div class="folder-icon">
          <img src="https://cdn-icons-png.flaticon.com/512/3330/3330314.png" alt="Resume">
          <div class="folder-label">Resume.doc</div>
        </div>
      </div>
    </div>
  </div>
</div>
    `
  },
  'psp-emu': {
    title: 'PSP EMU',
    content: `
      <div class="psp-emu-container">
        <div class="psp-emu-overlay"></div>
        <iframe class="psp-emu-window" src="https://websim.ai/c/BZhZd0JIqanPgCu5m"></iframe>
      </div>
    `
  },
  'google-chrome': {
    title: 'Google Chrome',
    content: `
      <iframe class="chrome-window" src="https://www.google.com/webhp?igu=1"></iframe>
    `
  },
  'internet-explorer': {
    title: 'Internet Explorer',
    content: `
      <div style="padding: 20px; text-align: center;">
        <h2>Internet Explorer</h2>
        <p>Welcome to the Internet!</p>
      </div>
    `
  },
  'outlook-express': {
    title: 'Outlook Express',
    content: `
      <div style="padding: 20px; text-align: center;">
        <h2>Outlook Express</h2>
        <p>You've got mail!</p>
      </div>
    `
  },
  'control-panel': {
    title: 'Control Panel',
    content: `
      <div style="padding: 20px; text-align: center;">
        <h2>Control Panel</h2>
        <p>System settings and configurations</p>
      </div>
    `
  },
  'help': {
    title: 'Help and Support',
    content: `
      <div style="padding: 20px; text-align: center;">
        <h2>Help and Support</h2>
        <p>How can we assist you today?</p>
      </div>
    `
  },
  'search': {
    title: 'Search',
    content: `
      <div style="padding: 20px; text-align: center;">
        <h2>Search</h2>
        <p>Find files and folders</p>
      </div>
    `
  },
  'run': {
    title: 'Run',
    content: `
      <div style="padding: 20px; text-align: center;">
        <h2>Run</h2>
        <input type="text" placeholder="Type the name of a program, folder, document, or Internet resource">
      </div>
    `
  },
  'email': {
    title: 'E-mail',
    content: `
      <div style="padding: 20px; text-align: center;">
        <h2>E-mail</h2>
        <p>Compose a new message</p>
      </div>
    `
  }
};

let windowZIndex = 1000;
let defaultWindowWidth = 800;
let defaultWindowHeight = 600;
let activeWindow = null;
let use24Hour = true;

function createWindow(app, width = defaultWindowWidth, height = defaultWindowHeight){
  const {title,content}=apps[app];
  const window=document.createElement('div');
  window.className='window';
  window.style.top='50px';
  window.style.left='50px';
  window.style.width=width+'px';
  window.style.height=height+'px';
  window.style.zIndex = ++windowZIndex;
  window.innerHTML=`
    <div class="window-header">
      <span>${title}</span>
      <div>
        <span class="minimize-btn">_</span>
        <span class="maximize-btn">□</span>
        <span class="close-btn">✖</span>
      </div>
    </div>
    <div class="window-content">${content}</div>
  `;
  document.getElementById('desktop').appendChild(window);
activeWindow = window;
  window.addEventListener("mousedown", ()=>{ activeWindow = window; });

  if(app === 'psp-emu' || app === 'google-chrome'){
    window.classList.add('maximized');
  }

  let isDragging=false;
  let startX,startY,startLeft,startTop;

  window.querySelector('.window-header').addEventListener('mousedown',function(e){
    if(app !== 'psp-emu' && app !== 'google-chrome'){
      isDragging=true;
      startX=e.clientX;
      startY=e.clientY;
      startLeft=parseInt(window.style.left)||0;
      startTop=parseInt(window.style.top)||0;
      window.style.zIndex = ++windowZIndex;
    }
  });

  document.addEventListener('mousemove',function(e){
    if(!isDragging)return;
    const newLeft=startLeft+e.clientX-startX;
    const newTop=startTop+e.clientY-startY;
    window.style.left=newLeft+'px';
    window.style.top=newTop+'px';
  });

  document.addEventListener('mouseup',function(){
    isDragging=false;
  });

  window.querySelector('.close-btn').addEventListener('click',function(){
    window.remove();
    removeTaskbarItem(window);
  });

  window.querySelector('.minimize-btn').addEventListener('click',function(){
    window.classList.add('minimized');
    updateTaskbarItem(window);
  });

  window.querySelector('.maximize-btn').addEventListener('click',function(){
    window.classList.toggle('maximized');
  });

  addTaskbarItem(window);

  return window;
}

function addTaskbarItem(window){
  const taskbarItems = document.getElementById('taskbar-items');
  const item = document.createElement('div');
  item.className = 'taskbar-item';
  item.textContent = window.querySelector('.window-header span').textContent;
  item.addEventListener('click', function(){
    if(window.classList.contains('minimized')){
      window.classList.remove('minimized');
      window.style.zIndex = ++windowZIndex;
    } else {
      window.classList.add('minimized');
    }
    updateTaskbarItem(window);
  });
  taskbarItems.appendChild(item);
  window.taskbarItem = item;
}

function updateTaskbarItem(window){
  if(window.classList.contains('minimized')){
    window.taskbarItem.style.background = 'linear-gradient(to bottom, #d0d0d0, #c0c0c0)';
  } else {
    window.taskbarItem.style.background = 'linear-gradient(to bottom, #f0f0f0, #e0e0e0)';
  }
}

function removeTaskbarItem(window){
  if(window.taskbarItem){
    window.taskbarItem.remove();
  }
}


function attachIcon(icon){
  let isDragging = false;
  let startX, startY;
  icon.addEventListener('mousedown', function(e){
    isDragging = true;
    startX = e.clientX - icon.offsetLeft;
    startY = e.clientY - icon.offsetTop;
    icon.style.zIndex = ++windowZIndex;
  });
  document.addEventListener('mousemove', function(e){
    if(!isDragging) return;
    let newX = e.clientX - startX;
    let newY = e.clientY - startY;
    icon.style.left = newX + 'px';
    icon.style.top = newY + 'px';
  });
  document.addEventListener('mouseup', function(){
    isDragging = false;
  });
  icon.addEventListener('click', function(e){
    if(!isDragging){
      const app = this.dataset.app;
      createWindow(app);
    }
  });
  icon.addEventListener('contextmenu', function(e){
    e.preventDefault();
    const url = prompt('Enter new icon URL:', this.querySelector('img').src);
    if(url){
      this.querySelector('img').src = url;
    }
  });
}

document.querySelectorAll('.icon').forEach(attachIcon);
document.querySelectorAll('.start-menu-item').forEach(item => {
  item.addEventListener('click', function() {
    const app = this.dataset.app;
    if (app === 'log-off' || app === 'turn-off') {
      alert(`You clicked on ${this.textContent}. This action is not implemented in this simulation.`);
    } else {
      createWindow(app);
    }
    document.querySelector('.start-menu').style.display = 'none';
  });
});

const startButton=document.querySelector('.start-button');const addAppButton=document.querySelector('.add-app-button');
const startMenu=document.querySelector('.start-menu');

startButton.addEventListener('click',function(){
  if(startMenu.style.display === 'block'){
    startMenu.style.display='none';
  }else{
    startMenu.style.display='block';
  }
});

document.addEventListener('click',function(e){
  if(!startButton.contains(e.target) && !startMenu.contains(e.target)){
    startMenu.style.display='none';
  }
});

addAppButton.addEventListener('click',function(){
  const id=prompt('Enter app ID (unique key):');
  if(!id || apps[id]) return;
  const title=prompt('Enter app title:');
  if(!title) return;
  const content=prompt('Enter HTML content for the app:','<div style="padding:20px">New App</div>');
  if(content===null) return;
  const iconUrl=prompt('Enter icon URL:','https://cdn-icons-png.flaticon.com/512/888/888879.png');
  if(iconUrl===null) return;
  apps[id]={title,content};
  const icon=document.createElement('div');
  icon.className='icon';
  icon.dataset.app=id;
  icon.style.top='20px';
  icon.style.left=(20+document.querySelectorAll(".icon").length*80)+'px';
  icon.innerHTML=`<img src="${iconUrl}" alt="${title}"><div class="icon-label">${title}</div>`;
  document.getElementById('desktop').appendChild(icon);
  attachIcon(icon);
});
function updateClock(){
  const now = new Date();
  const israelTime = new Date(now.toLocaleString("en-US", {timeZone: "Asia/Jerusalem"}));
  let h = israelTime.getHours();
  const minutes = israelTime.getMinutes().toString().padStart(2, '0');
  let displayHours = h.toString().padStart(2, '0');
  let suffix = '';
  if(!use24Hour){
    displayHours = ((h % 12) || 12).toString().padStart(2, '0');
    suffix = h >= 12 ? ' PM' : ' AM';
  }
  document.querySelector('.clock').textContent = `${displayHours}:${minutes}${suffix}`;
}
setInterval(updateClock,1000);
updateClock();
const APP_VERSION = '1.0.0';
window.addEventListener('DOMContentLoaded', function () {
  const contextMenu = document.getElementById('custom-menu');
  const menuButton = document.getElementById('menu-button');
  const aboutModal = document.getElementById('about-modal');
  const aboutClose = document.getElementById('about-close');
  let previousFocus;
  const focusableSelector = 'a, button, input, textarea, select, [tabindex]:not([tabindex="-1"])';
  let modalFocusables = [];
  function trapFocus(e) {
      if (e.key === "Tab") {
        e.preventDefault();
        const items = modalFocusables;
        if (items.length === 0) {
          return;
        }
        let index = items.indexOf(document.activeElement);
        if (e.shiftKey) {
          index = index <= 0 ? items.length - 1 : index - 1;
        } else {
          index = index === items.length - 1 ? 0 : index + 1;
        }
        items[index].focus();
      } else if (e.key === "Escape") {
        aboutClose.click();
      }
    }
  document.getElementById('about-version').textContent = APP_VERSION;
  document.addEventListener('contextmenu', function (e) {
    e.preventDefault();
    contextMenu.style.left = e.pageX + 'px';
    contextMenu.style.top = e.pageY + 'px';
    contextMenu.style.display = 'block';
  });
  document.addEventListener('click', function (e) {
    if (!contextMenu.contains(e.target) && e.target !== menuButton) {
      contextMenu.style.display = 'none';
    }
  });
  menuButton.addEventListener('click', function () {
    if (draggingMenu) {
      draggingMenu = false;
      return;
    }
    const r = this.getBoundingClientRect();
    contextMenu.style.left = r.left + 'px';
    contextMenu.style.top = r.bottom + 'px';
    contextMenu.style.display = 'block';
  });
  document.getElementById('menu-refresh').addEventListener('click', function () {
    location.reload();
  });
  document.getElementById('menu-top').addEventListener('click', function () {
    contextMenu.classList.toggle('top');
  });
  document.getElementById('menu-size').addEventListener('click', function () {
      const w = prompt('Default window width:', defaultWindowWidth);
      if (w !== null) {
        const h = prompt('Default window height:', defaultWindowHeight);
        if (h !== null) {
          const nw = parseInt(w);
          const nh = parseInt(h);
          if (!isNaN(nw) && nw > 0) defaultWindowWidth = nw;
          if (!isNaN(nh) && nh > 0) defaultWindowHeight = nh;
        }
      }
      contextMenu.style.display = 'none';
    });
  document.getElementById('menu-wallpaper').addEventListener('click', function () {
    const desktop = document.getElementById('desktop');
    const current = getComputedStyle(desktop).backgroundImage;
    const match = current.match(/^url\(["']?(.*?)["']?\)$/i);
    const defaultUrl = match ? match[1] : '';
    const url = prompt('Enter wallpaper URL:', defaultUrl);
    if (url !== null) {
      if (url.trim() === '') {
        desktop.style.backgroundImage = 'none';
      } else {
        const escaped = url.replace(/'/g, "\\'");
        desktop.style.backgroundImage = `url('${escaped}')`;
      }
    }
    contextMenu.style.display = 'none';
  });
  document.getElementById("menu-about").addEventListener("click", function () {
    aboutModal.style.display = "flex";
    contextMenu.style.display = "none";
    previousFocus = document.activeElement;
    modalFocusables = Array.from(aboutModal.querySelectorAll(focusableSelector));
    aboutModal.addEventListener('keydown', trapFocus);
    if (modalFocusables.length > 0) {
      modalFocusables[0].focus();
    }
  });

  aboutClose.addEventListener("click", function () {
    aboutModal.removeEventListener('keydown', trapFocus);
    aboutModal.style.display = "none";
    if (previousFocus) previousFocus.focus();
  });

  window.addEventListener('click', function (e) {
    if (e.target === aboutModal) {
      aboutClose.click();
    }
  });
  document.getElementById('menu-move').addEventListener('click', function () {
    menuButtonMovable = !menuButtonMovable;
    menuButton.style.cursor = menuButtonMovable ? 'move' : 'pointer';
    contextMenu.style.display = 'none';
  });
  document.getElementById('menu-minimize').addEventListener('click', function () {
    if (activeWindow) {
      activeWindow.classList.add('minimized');
      updateTaskbarItem(activeWindow);
    }
    contextMenu.style.display = 'none';
  });
    document.getElementById('menu-reset').addEventListener('click', function () {
      menuButton.style.left = '';
      menuButton.style.right = '20px';
      menuButton.style.top = '80px';
      contextMenu.style.display = 'none';
    });
    document.getElementById('menu-clock').addEventListener('click', function () {
      use24Hour = !use24Hour;
      updateClock();
      contextMenu.style.display = 'none';
    });
  document.getElementById('menu-close').addEventListener('click', function () {
    if (activeWindow) {
      activeWindow.remove();
      removeTaskbarItem(activeWindow);
    }
    contextMenu.style.display = 'none';
  });
});
</script>
<div id="custom-menu" class="context-menu">
  <ul>
    <li id="menu-refresh">Refresh</li>
    <li id="menu-top">Toggle On Top</li>
    <li id="menu-size">Set Window Size...</li>
    <li id="menu-move">Move Menu Button</li>
    <li id="menu-wallpaper">Change Wallpaper...</li>
    <li id="menu-about">About</li>
    <li id="menu-minimize">Minimize Window</li>
      <li id="menu-reset">Reset Menu Position</li>
      <li id="menu-clock">Toggle Clock Format</li>
    <li id="menu-close">Close Window</li>
  </ul>
</div>
<button id="menu-button" class="open-menu-button">Menu</button>
<div id="about-modal" role="dialog" aria-modal="true" class="about-modal">
  <div class="about-modal-content">
    <span id="about-close" aria-label="Close" class="about-close">&times;</span>
    <h3>Windows XP Simulator</h3>
    <p>Version <span id="about-version"></span></p>
  </div>
</div>
<script>
  let lastMouseX = 0,
    lastMouseY = 0;
  document.addEventListener('mousemove', e => {
    lastMouseX = e.clientX;
    lastMouseY = e.clientY;
  });
  document.addEventListener("keydown", e => {
    if (aboutModal.style.display === "flex") {
      if (e.key === "Escape") {
        aboutClose.click();
      } else if (e.key === "Tab") {
        trapFocus(e);
      }
    } else if (e.key === "ContextMenu") {
      contextMenu.style.left = lastMouseX + "px";
      contextMenu.style.top = lastMouseY + "px";
      contextMenu.style.display = "block";
      e.preventDefault();
    }
  });
  let draggingMenu = false,
    offsetX = 0,
    offsetY = 0,
    menuButtonMovable = true;
  menuButton.addEventListener('mousedown', function (e) {
    if (e.button !== 0 || !menuButtonMovable) return;
    draggingMenu = true;
    const r = menuButton.getBoundingClientRect();
    offsetX = e.clientX - r.left;
    offsetY = e.clientY - r.top;
    menuButton.style.right = 'auto';
  });
  document.addEventListener('mousemove', function (e) {
    if (!draggingMenu) return;
    menuButton.style.left = e.clientX - offsetX + 'px';
    menuButton.style.top = e.clientY - offsetY + 'px';
  });
  document.addEventListener('mouseup', function () {
    draggingMenu = false;
  });
</script>
</body></html>
